<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Al-Istibanah</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Source+Serif+4&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f1115;
  --panel:#151923;
  --panel-2:#1b2030;
  --border:#252b3a;
  --text:#e6e9ef;
  --muted:#9aa1b2;
  --accent:#4f8cff;
}

*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:Inter,system-ui;
  background:var(--bg);
  color:var(--text);
}

/* ========== TOPBAR ========== */
.topbar{
  height:48px;
  display:flex;
  justify-content:flex-end;
  align-items:center;
  padding:0 20px;
  border-bottom:1px solid var(--border);
  background:var(--panel);
}

.search-area{display:flex;gap:8px}
.search-box input{
  background:var(--panel-2);
  border:1px solid var(--border);
  color:var(--text);
  padding:7px 10px;
  border-radius:6px;
  width:220px;
}

/* ========== HEADER ========== */
header{
  border-bottom:1px solid var(--border);
  background:var(--panel);
}
.header-inner{
  max-width:1200px;
  margin:auto;
  padding:28px 20px;
}
.header-inner h1{
  font-weight:600;
  letter-spacing:.2px;
}
.header-inner p{
  color:var(--muted);
  margin-top:6px;
}

/* ========== NAV ========== */
.navbar{
  background:var(--panel);
  border-bottom:1px solid var(--border);
}
.nav-inner{
  max-width:1200px;
  margin:auto;
  display:flex;
  gap:26px;
  padding:0 20px;
}
.nav-item{position:relative}
.nav-item>a{
  display:block;
  padding:14px 4px;
  text-decoration:none;
  color:var(--text);
  font-weight:500;
}
.nav-item>a:hover{color:var(--accent)}

/* Dropdown */
.dropdown{
  position:absolute;
  top:100%;
  left:0;
  min-width:200px;
  background:rgba(27,32,48,.95);
  backdrop-filter:blur(8px);
  border:1px solid var(--border);
  border-radius:8px;
  overflow:hidden;

  opacity:0;
  transform:translateY(10px);
  pointer-events:none;
  transition:.25s ease;
}
.nav-item:hover .dropdown{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
.dropdown a{
  display:block;
  padding:10px 14px;
  color:var(--text);
  text-decoration:none;
}
.dropdown a:hover{
  background:rgba(255,255,255,.04);
  color:var(--accent);
}

/* ========== LAYOUT ========== */
.container{
  max-width:1200px;
  margin:30px auto;
  padding:0 20px;
  display:grid;
  grid-template-columns:1fr 280px;
  gap:28px;
}

/* ========== MAIN ========== */
main{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:10px;
  padding:22px;
}
main h2{
  margin-bottom:16px;
  font-weight:500;
}

/* ========== ARTICLE CARDS ========== */
.article{
  background:var(--panel-2);
  border:1px solid var(--border);
  border-radius:8px;
  padding:16px;
  margin-bottom:14px;
}
.article-title{
  color:var(--accent);
  font-size:20px;
  font-family:"Source Serif 4",serif;
}
.article-meta{
  color:var(--muted);
  font-size:13px;
  margin-bottom:8px;
}
.article p{
  font-family:"Source Serif 4",serif;
  line-height:1.6;
}
.read-more{
  color:var(--accent);
  text-decoration:none;
}

/* ========== ASIDE ========== */
aside{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:10px;
  padding:18px;
}
aside h3{
  margin-bottom:12px;
  font-weight:500;
}
.nav-item-box{
  padding:10px;
  border-radius:6px;
  background:var(--panel-2);
  border:1px solid var(--border);
  margin-bottom:8px;
}

/* ========== FOOTER ========== */
footer{
  border-top:1px solid var(--border);
  padding:24px;
  text-align:center;
  color:var(--muted);
}
</style>
</head>
<body>

<div class="topbar">
  <div class="search-area">
    <div class="search-box">
      <input id="searchInput" placeholder="Search articles...">
    </div>
  </div>
</div>

<header>
  <div class="header-inner">
    <h1>Al-Istibānah</h1>
    <p>Personal notes, studies, and reminders upon the Book and the Sunnah.</p>
  </div>
</header>

<div class="navbar">
  <div class="nav-inner">
    <div class="nav-item"><a href="/">Home</a></div>
    <div class="nav-item">
      <a href="#">Categories ▾</a>
      <div class="dropdown">
        <a href="#">ʿAqīdah</a>
        <a href="#">Manhaj</a>
        <a href="#">Fiqh</a>
        <a href="#">Tazkiyah</a>
      </div>
    </div>
    <div class="nav-item">
      <a href="#">Library ▾</a>
      <div class="dropdown">
        <a href="#">Books</a>
        <a href="#">Notes</a>
        <a href="#">Translations</a>
      </div>
    </div>
    <div class="nav-item"><a href="#">About</a></div>
  </div>
</div>

<div class="container">
  <main>
    <h2>Latest Articles</h2>
    <div id="articlesList"></div>
  </main>

  <aside>
    <h3>Recent</h3>
    <div id="recentArticles"></div>
  </aside>
</div>

<footer>
© 2025 Al-Istibānah
</footer>

<script>
let articlesData=[];

fetch("/articles.json")
.then(r=>r.json())
.then(d=>{
  articlesData=d;
  renderArticles(d);
  renderRecent(d);
});

function hijriDate(g){
  return new Intl.DateTimeFormat("en-TN-u-ca-islamic",{
    day:"numeric",month:"long",year:"numeric"
  }).format(new Date(g));
}

function renderArticles(list){
  const c=document.getElementById("articlesList");
  c.innerHTML="";
  list.sort((a,b)=>new Date(b.date)-new Date(a.date))
  .forEach(a=>{
    const d=document.createElement("div");
    d.className="article";
    d.innerHTML=`
      <div class="article-title">${a.title}</div>
      <div class="article-meta">${hijriDate(a.date)}</div>
      <p>${a.excerpt} <a class="read-more" href="${a.file}">Read more →</a></p>
    `;
    c.appendChild(d);
  });
}

function renderRecent(list){
  const r=document.getElementById("recentArticles");
  r.innerHTML="";
  list.slice(0,5).forEach(a=>{
    const d=document.createElement("div");
    d.className="nav-item-box";
    d.textContent=a.title;
    r.appendChild(d);
  });
}
</script>

</body>
</html>
